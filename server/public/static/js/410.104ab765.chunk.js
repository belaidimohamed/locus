"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[410],{2416:function(e,r,t){t.d(r,{g:function(){return l}});var n=t(5861),a=t(5671),s=t(3144),u=t(7757),c=t.n(u),i=t(4569),o=t.n(i),l=function(){function e(){(0,a.Z)(this,e)}return(0,s.Z)(e,null,[{key:"login",value:function(){var e=(0,n.Z)(c().mark((function e(r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().post("/auth/login",r).then((function(e){return o().defaults.headers.common.Authorization="Bearer "+e.data.detail,e})).catch((function(e){return Promise.reject(e.response.data)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=(0,n.Z)(c().mark((function e(r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().post("auth/register",r).catch((function(e){return Promise.reject(e.response.data)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()}]),e}()},5410:function(e,r,t){t.r(r),t.d(r,{Login:function(){return x}});var n=t(5861),a=t(8152),s=t(7757),u=t.n(s),c=t(2791),i=t(6871),o=t(2416),l=t(645),d=t(3504),p=t(8505),f=t(3386),h=t(184);function g(e){var r=e.submitHandler,t=e.error,n=(0,c.useState)(),s=(0,a.Z)(n,2),u=s[0],i=s[1],o=(0,c.useState)(),l=(0,a.Z)(o,2),g=l[0],m=l[1];return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:"login-card",children:[(0,h.jsx)(d.rU,{to:"/",children:(0,h.jsx)("div",{className:"logo",children:(0,h.jsx)("img",{className:"logo",src:f,alt:"logo"})})}),(0,h.jsxs)("div",{className:"card",children:[(0,h.jsx)("h1",{className:"title",children:"Login"}),(0,h.jsx)("input",{type:"text",placeholder:"username",value:u,onChange:function(e){return i(e.target.value.toLocaleLowerCase())},required:!0}),(0,h.jsx)("input",{type:"password",placeholder:"password",value:g,onChange:function(e){return m(e.target.value)},required:!0}),(0,h.jsx)("button",{type:"button",className:"btn login-submit",onClick:function(){return r({username:u,password:g})},children:"Login"}),(0,h.jsx)("p",{className:"error",children:t}),(0,h.jsxs)("p",{className:"redirect",children:["Don't have an account? \xa0 ",(0,h.jsx)(d.rU,{to:"/register",children:"Register"})]})]}),(0,h.jsx)("img",{className:"bg-img",src:p,alt:"bg"})]})})}var m=t(2415);function x(){var e=(0,c.useContext)(m.M),r=(0,i.s0)(),t=(0,c.useState)(null),s=(0,a.Z)(t,2),d=s[0],p=s[1],f=function(){var t=(0,n.Z)(u().mark((function t(n){var s,c,i,d;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.username||!n.password){t.next=10;break}return t.next=3,(0,l.m)(o.g.login,n);case 3:s=t.sent,c=(0,a.Z)(s,2),i=c[0],d=c[1],i?p(i.detail):(localStorage.setItem("token",d.data.detail),e.setToken(d.data.detail),r("/messages")),t.next=11;break;case 10:p("username and password are required!");case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,h.jsx)(g,{submitHandler:f,error:d})}},8505:function(e,r,t){e.exports=t.p+"static/media/logreg.a4d7a15bcab6b7db2d4c.jpg"}}]);
//# sourceMappingURL=410.104ab765.chunk.js.map